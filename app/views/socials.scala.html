@import java.util
@(page: String, money: String, level: Integer, ranking: Integer, user: model.UserFactory#User, friends: util.List[model.UserFactory#User])(implicit assetsFinder: AssetsFinder)
@import model.UserFactory

    <body style="overflow-y: scroll;" onload="createFriends(@user.getId), getMessages()">
    @navbar("Socials", money, level, ranking) {
        <div class="row no-gutters">
            <div class="col-lg-4 p-3">
                <div class="input-group">
                    <input type="search" id="search-user" class="form-control rounded" placeholder="Search for new friends" aria-label="Search" aria-describedby="search-addon" />
                    <button type="button" for="search-user" class="btn btn-secondary rounded-pill px-3 ml-3 w-25" onclick="search()">search</button>
                </div>
                    <!--In this ul all of the friends are displayed -->
                <div class="search-friends py-3 text-white d-block" id="search-friends"></div>
                <ul class="list-unstyled chat-list mt-2 mb-0" id="friend-list" >
                </ul>
            </div>
            <div class="col-lg-8">
                <div class="mainbackround">
                    <div class="chat-content" id="chat-content">
                        <div class="select-friend" id="select-friend">
                                <!--This div is displayed when you load the page and have not yet selected a friend you want to chat with -->
                                <!--It dissappears as soon as you select a friend-->
                            <h3 class="font-weight-bold text-dark pt-3">Select a friend to start chatting!</h3>
                        </div>
                        <div class="chat-history" id="chat-history">
                                <!--This div is invisible until you select a friend-->
                            <div class="chat-header">
                                    <!--The content for the header is set via the openChat() method in javascript-->
                                <span class="btn avatar-background"><img src="" class="socialsAvatar" id="header-avatar"/>
                                </span>
                                <span class="socialsName" id="header-name"></span><br>
                                <span class="friendsRanking" id="header-username"></span>
                                <button type="button" class="btn-show-profile btn btn-secondary rounded-pill px-3" onclick="openModal()">Show profile</button>
                            </div>
                            <div class="chat-messages px-4 py-3" id="chat">
                                <ul id="chat-list">
                                        <!--The content of the chat is generated by using the getMessages() function in javascript-->
                                        <!--It is displayed as single li items which each contain a div with the message-->
                                </ul>
                            </div>
                            <div class="chat-input">
                                <div class="input-group py-3">
                                    <input type="text" class="form-control rounded" placeholder="Write a message to your friend" aria-label="Message" id="message" />
                                    <span class="px-2"></span>
                                    <button type="button" class="btn btn-secondary rounded-pill px-5" onclick="sendMessage()">send</button>
                                    <span class="pl-2"></span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="friendModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalCenterTitle">Friends Profile</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        onclick="closeModal()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="row modal-body justify-content-center align-items-center">
                        <div class="container px-5 d-flex justify-content-center">
                            <div class="image d-flex flex-column justify-content-center align-items-center m-4">
                                <button type="button" class="btn btn-backround">
                                    <img src="" alt="avatar" height="130" width="130" id="friends-avatar"/>
                                </button>
                                <span class="name text-center pt-3" id="friends-name">Hello</span>
                                <span class="name" id="friends-ranking"></span>
                                <div class="d-flex flex-row justify-content-center align-items-center gap-2 mb-3">
                                    <div id="level" class="level"></div>
                                </div>
                                <div class="d-flex flex-row justify-content-center align-items-center mt-3">
                                    <div id="points" class="points"></div>
                                </div>
                                <div class="d-flex flex-row justify-content-center align-items-center mb-4">
                                    <div id="highscore" class="highscore">Highscore</div>
                                </div>
                                <div class="text m-3">
                                    <span>
                                        started the practice on
                                    </span>
                                </div>
                                <div class=" px-2 rounded date"><span class="join" id="timestamp"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="ModalUnfriendUser" tabindex="-1" aria-labelledby="ModalUnfriendUser" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title" id="ModalLearnCoffeesLabel">
                            Unfriend <span id="delete-friend">this user</span>
                        </h2>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p class="learnText">Are you sure you want to unfriend this user?</p>
                        <p class="learnText">
                            You won`t be able to send them any more message nor will you be able to view their profile. All of your
                            previously sent messages will be deleted.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary rounded-pill px-3" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-secondary rounded-pill px-3" onclick="deleteFriendship()">Yes, I am sure</button>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript" src="@assetsFinder.path("javascripts/socials.js")"></script>
}